CREATE TABLE scott.CUAHANG (
  MACH VARCHAR2(20) PRIMARY KEY,
  TENCH NVARCHAR2(20),
  NGAYSINH DATE,
  DCHI NVARCHAR2(30) NOT NULL,
  DTHOAI NUMBER(10,0)
);

CREATE TABLE scott.NHANVIEN (
  MANV VARCHAR2(20) PRIMARY KEY,
  TENNV NVARCHAR2(20),
  NGAYSINH DATE,
  MACH VARCHAR(20) CONSTRAINT MA_CH REFERENCES SCOTT.cuahang(MACH)
);

ALTER TABLE scott.cuahang drop column NGAYSINH;

CREATE TABLE scott.HOADON (
  SOHD VARCHAR2(20) PRIMARY KEY,
  NGAYLAP DATE,
  MANV VARCHAR2(20) CONSTRAINT MA_NV REFERENCES SCOTT.NHANVIEN(MANV),
  TONGTIEN FLOAT
);


CREATE TABLE scott.HANGHOA (
  MAHANG VARCHAR2(20) PRIMARY KEY,
  TENHANG NVARCHAR2(20),
  DONGIA FLOAT CHECK (DONGIA > 0),
  DONVITINH VARCHAR2(30)
);


CREATE TABLE scott.NHANVIEN (
  MANV VARCHAR2(20) PRIMARY KEY,
  TENNV NVARCHAR2(20),
  NGAYSINH DATE,
  MACH VARCHAR(20) CONSTRAINT MA_CH REFERENCES SCOTT.cuahang(MACH)
);


CREATE TABLE scott.chitiethd (
  SOHD VARCHAR2(20) CONSTRAINT SO_HD REFERENCES SCOTT.HOADON(SOHD),
  MAHANG VARCHAR2(20) CONSTRAINT MAHANG REFERENCES SCOTT.HANGHOA(MAHANG),
  SOLUONG NUMBER,
  CONSTRAINT CHITIETHD_pk PRIMARY KEY (SOHD, MAHANG)
);

ALTER TABLE scott.CUAHANG ADD Email varchar2(30);
ALTER TABLE scott.chitiethd ADD dongiaban float;

INSERT INTO scott.cuahang (MACH,TENCH,DCHI,DTHOAI) VALUES ('a001', 'VINMART', 'AN GIANG', 1234567890); 
INSERT INTO scott.cuahang (MACH,TENCH,DCHI,DTHOAI) VALUES ('a002', 'BACHHOAXANH', 'CAN THO', 1234567891);

INSERT INTO scott.NHANVIEN (MANV,TENNV,NGAYSINH,MACH) VALUES ('NV001', 'THAI', '01-FEB-01', 'a001');
INSERT INTO scott.NHANVIEN (MANV,TENNV,NGAYSINH,MACH) VALUES ('NV002', 'HAO', '02-FEB-01', 'a002');

INSERT INTO scott.HOADON (SOHD,NGAYLAP,MANV,TONGTIEN) VALUES ('HD001', '01-FEB-02', 'NV002', 1000000);
INSERT INTO scott.HOADON (SOHD,NGAYLAP,MANV,TONGTIEN) VALUES ('HD002', '02-FEB-02', 'NV001', 1200000);

INSERT INTO scott.HANGHOA (MAHANG,TENHANG,DONGIA,DONVITINH) VALUES ('HH001', 'MI GOI', 3000, 'VND');
INSERT INTO scott.HANGHOA (MAHANG,TENHANG,DONGIA,DONVITINH) VALUES ('HH002', 'DAU AN', 10000, 'VND');

INSERT INTO scott.CHITIETHD (SOHD,MAHANG,SOLUONG,DONGIABAN) VALUES ('HD001', 'HH001', 200, 10000);
INSERT INTO scott.CHITIETHD (SOHD,MAHANG,SOLUONG,DONGIABAN) VALUES ('HD002', 'HH001', 300, 20000);

-----ex2---------


CREATE TABLE scott.sinhvien (
  Mssv VARCHAR2(20) PRIMARY KEY,
  tenlop NVARCHAR2(20),
  hoten NVARCHAR2(30) not null,
  ngaysinh DATE
);

CREATE TABLE scott.monhoc (
  MAMON VARCHAR2(20) PRIMARY KEY,
  TENMON NVARCHAR2(30),
  SOTINCHI NUMBER CHECK (SOTINCHI > 0)
);


CREATE TABLE scott.HOATDONG (
  MAHD VARCHAR2(20) PRIMARY KEY,
  TENHD NVARCHAR2(30),
  NGAYTOCHUC DATE
);

CREATE TABLE scott.KQHT (
  MSSV VARCHAR2(20) CONSTRAINT MS_SV REFERENCES SCOTT.SINHVIEN(MSSV),
  MAMON VARCHAR2(20) CONSTRAINT MA_MON REFERENCES SCOTT.MONHOC(MAMON),
  LANKT NUMBER,
  DIEM FLOAT,
  CONSTRAINT KQHT_pk PRIMARY KEY (MSSV, MAMON)
);


INSERT INTO scott.SINHVIEN (MSSV,TENLOP,HOTEN,NGAYSINH) VALUES ('B10001', 'CLC1', 'THAI', '02-FEB-01'); 
INSERT INTO scott.SINHVIEN (MSSV,TENLOP,HOTEN,NGAYSINH) VALUES ('B10002', 'CLC1', 'LONG', '02-FEB-02');

INSERT INTO scott.MONHOC (MAMON,TENMON,SOTINCHI) VALUES ('MON0001','TOAN',12);
INSERT INTO scott.MONHOC (MAMON,TENMON,SOTINCHI) VALUES ('MON0002','LAP TRINH',15);

INSERT INTO scott.HOATDONG (MAHD,TENHD,NGAYTOCHUC) VALUES ('HD001','TRUNG THU', '02-FEB-02' );
INSERT INTO scott.HOATDONG (MAHD,TENHD,NGAYTOCHUC) VALUES ('HD002','TET', '03-FEB-02' );

INSERT INTO scott.KQHT (MSSV,MAMON,LANKT,DIEM) VALUES ('B10001','MON0001',2,10);
INSERT INTO scott.KQHT (MSSV,MAMON,LANKT,DIEM) VALUES ('B10002','MON0002',3,10);









  