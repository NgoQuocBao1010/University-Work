<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Excercise 5 Lab 2</title>
</head>
<body>
    <h1>Personal Information</h1>
    <div class="wrapper">
        <form action="">
            <!-- Name -->
            <div class="row">
                <div class="label">
                    <h4>Enter Name<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <input id='name' class='textInput' type="text" name="name"><span id='nameSpan' style='color: red; font-size: 15px;'></span>
                </div>
                
            </div>

            <!-- Sex -->
            <div class="row">
                <div class="label">
                    <h4>Sex<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <input type="radio" id="male" name="gender" value="male" style="font-size: 20px;">
                    <label for="male" style="margin-right: 30px;">Male</label>
                    <input type="radio" id="female" name="gender" value="female">
                    <label for="female">Female</label>
                    <span id='genderSpan' style='color: red; font-size: 15px;'></span>
                </div>
            </div>

            <!-- Email address -->
            <div class="row">
                <div class="label">
                    <h4>Enter email address<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <input id='email' class='textInput' type="text" name="nameField">
                    <span id='emailSpan' style='color: red; font-size: 15px;'></span>
                </div>
            </div>

            <!-- Birthday -->
            <div class="row">
                <div class="label">
                    <h4>Enter birthday (MM/DD/YYYY)<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <input id='birthday' class='textInput' type="text" name="nameField" maxlength="10">
                    <span id='birthdaySpan' style='color: red; font-size: 15px;'></span>
                </div>
            </div>

            <!-- Street address -->
            <div class="row">
                <div class="label">
                    <h4>Enter street address (line 1)<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <input id='address' class='textInput' type="text" name="nameField">
                    <span id='addressSpan' style='color: red; font-size: 15px;'></span>
                </div>
            </div>

            <!-- City -->
            <div class="row">
                <div class="label">
                    <h4>Enter city<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <input id='city' class='textInput' type="text" name="nameField">
                    <span id='citySpan' style='color: red; font-size: 15px;'></span>
                </div>
            </div>

            <!-- Region -->
            <div class="row">
                <div class="label">
                    <h4>Select region<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <select id='region'>
                        <option value=""></option>
                        <option value="asia">Asia</option>
                        <option value="eu">Europe</option>
                        <option value="na">North America</option>
                        <option value="sa">South America</option>
                        <option value="afr">Africa</option>
                    </select>
                    <span id='regionSpan' style='color: red; font-size: 15px;'></span>
                </div>
            </div>

            <!-- Zip code -->
            <div class="row">
                <div class="label">
                    <h4>Enter 5 digit ZIP code<sup>*</sup>:</h4>
                </div>
                <div class="input">
                    <input type="text" 
                        id='zipcode'
                        maxlength="5" 
                        class="textInput"
                        onkeypress='return event.charCode >= 48 && event.charCode <= 57'    
                        required 
                    />
                    <span id='zipcodeSpan' style='color: red; font-size: 15px;'></span>
                </div>
            </div>
        </form>

        <!-- Buttons -->
        <div class="row">
            <div class="label">
                <button onclick="submit()">Finished</button>
            </div>
            <div class="input">
                <button id='clearBtn' onclick="clear()">Clear</button>
            </div>
        </div>

    </div>
</body>

<script>
    var errorSpan = [];

    // Name Input
    var nameInput = document.getElementById('name');
    var nameError = document.getElementById(nameInput.id + 'Span');
    errorSpan.push(nameError);

    // address Input
    var addressInput = document.getElementById('address');
    var addressError = document.getElementById(addressInput.id + 'Span');
    errorSpan.push(addressError);

    // City Input
    var cityInput = document.getElementById('city');
    var cityError = document.getElementById(cityInput.id + 'Span');
    errorSpan.push(cityError);

    // zipcode Input
    var zipcodeInput = document.getElementById('zipcode');
    var zipcodeError = document.getElementById(zipcodeInput.id + 'Span');
    errorSpan.push(zipcodeError);

    // Gender Input
    function getGender() {
        var genders = document.getElementsByName('gender');
        var gender = '';
        for (var i = 0, length = genders.length; i < length; i++) {
            if (genders[i].checked) {
                gender = genders[i].value;
                break;
            }
        }

        return gender;
    }
    var genderError = document.getElementById('genderSpan');
    errorSpan.push(genderError);

    // Email input
    var emailInput = document.getElementById('email');
    var emailError = document.getElementById(emailInput.id + 'Span');
    var emailFormat = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
    errorSpan.push(emailError);

    // Birthday Input
    var birthdayInput = document.getElementById('birthday');
    var birthdayError = document.getElementById(birthdayInput.id + 'Span');
    var birthdayFormat = new RegExp("^((0?[1-9]|1[012])[- /.](0?[1-9]|[12][0-9]|3[01])[- /.](19|20)?[0-9]{2})*$");
    errorSpan.push(birthdayError);

    // Region Input
    var regionInput = document.getElementById('region');
    var regionError = document.getElementById(regionInput.id + 'Span');
    errorSpan.push(regionError);


    function submit() {
        nameError.innerHTML = (nameInput.value === "") ? 'Đây là trường bắt buộc!' : '';
        addressError.innerHTML = (addressInput.value === "") ? 'Đây là trường bắt buộc!' : '';
        cityError.innerHTML = (cityInput.value === "") ? 'Đây là trường bắt buộc!' : '';
        zipcodeError.innerHTML = (zipcodeInput.value === "") ? 'Đây là trường bắt buộc!' : '';

        var gender = getGender();
        genderError.innerHTML = (gender === "") ? 'Đây là trường bắt buộc!' : '';


        if (emailInput.value !== '') {
            emailError.innerHTML = (emailFormat.test(emailInput.value)) ? '' : 'Sai định dạng email!';
        }
        else {
            emailError.innerHTML = 'Đây là trường bắt buộc!'
        }

        if (birthdayInput.value !== '') {
            birthdayError.innerHTML = (birthdayFormat.test(birthdayInput.value)) ? '' : 'Sai định dạng ngày!';
        }
        else {
            birthdayError.innerHTML = 'Đây là trường bắt buộc!'
        }

        var selectedRegion = regionInput.options[regionInput.selectedIndex].text;
        regionError.innerHTML = (selectedRegion === "") ? 'Đây là trường bắt buộc!' : '';
    }

    function clear() {
        for (error of errorSpan) {
            error.innerHTML = '';
        }

        var textInputs = document.getElementsByClassName('textInput');
        for (input of textInputs) {
            input.value = '';
        }

        var genders = document.getElementsByName('gender'); 
        for (var i = 0, length = genders.length; i < length; i++) {
            genders[i].checked = false;
        }

        regionInput.selectedIndex = 0;
    }

    document.getElementById("clearBtn").addEventListener("click", clear);
</script>

</html>